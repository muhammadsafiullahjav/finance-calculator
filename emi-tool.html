<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Calculate your Equated Monthly Installment (EMI) with our easy-to-use EMI Calculator. Supports multiple currencies, real-time updates, and interactive charts. Perfect for loan planning!">
  <meta name="keywords" content="EMI Calculator, Loan Calculator, EMI Calculation, Loan EMI, Monthly Installment, Loan Planning, Currency Converter">
  <meta name="author" content="EMI Calculator Team">
  <meta name="robots" content="index, follow">
  <title>EMI Calculator - Calculate Loan EMI with Interactive Charts</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "EMI Calculator",
      "description": "Calculate your Equated Monthly Installment (EMI) with our easy-to-use EMI Calculator. Supports multiple currencies, real-time updates, and interactive charts.",
      "applicationCategory": "Finance",
      "operatingSystem": "Web",
      "url": "https://www.emicalculator.com",
      "screenshot": "https://www.emicalculator.com/screenshot.png",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      }
    }
  </script>
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background: #121212; /* Dark background */
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
      color: #e0e0e0; /* Light text color */
    }

    header {
      background: #1f1f1f; /* Dark header */
      color: #fff;
      width: 100%;
      padding: 1rem 0;
      text-align: center;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
    }

    nav {
      display: flex;
      justify-content: center;
      background: #1f1f1f; /* Dark nav */
      padding: 1rem;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
    }

    nav a {
      margin: 0 1rem;
      text-decoration: none;
      color: #4a90e2; /* Blue links */
      font-weight: 500;
      transition: color 0.3s ease;
    }

    nav a:hover {
      color: #ff6b6b; /* Red hover */
    }

    header h1 {
      margin: 0;
      font-size: 2rem;
    }

    .container {
      background: #1f1f1f; /* Dark container */
      padding: 2rem;
      border-radius: 15px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
      width: 90%;
      max-width: 800px;
      margin: 2rem 0;
    }

    .intro {
      text-align: center;
      margin-bottom: 2rem;
    }

    .intro p {
      font-size: 1rem;
      color: #b0b0b0; /* Light gray text */
      line-height: 1.6;
    }

    .input-group {
      margin-bottom: 1.5rem;
    }

    .input-group label {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: 500;
      color: #4a90e2; /* Blue label */
    }

    .input-group input,
    .input-group select {
      width: 100%;
      padding: 0.75rem;
      border: 1px solid #333; /* Dark border */
      border-radius: 8px;
      font-size: 1rem;
      transition: border-color 0.3s ease;
      background: #333; /* Dark input background */
      color: #e0e0e0; /* Light text */
    }

    .input-group input:focus,
    .input-group select:focus {
      border-color: #4a90e2; /* Blue focus */
      outline: none;
    }

    .results {
      margin-top: 2rem;
      text-align: center;
    }

    .results h2 {
      font-size: 1.5rem;
      color: #4a90e2; /* Blue heading */
      margin-bottom: 1rem;
    }

    .results p {
      font-size: 1.2rem;
      margin: 0.5rem 0;
      color: #b0b0b0; /* Light gray text */
    }

    .charts {
      display: flex;
      justify-content: space-between;
      margin-top: 2rem;
    }

    .chart-container {
      width: 48%;
    }

    .buttons {
      display: flex;
      justify-content: center;
      gap: 1rem;
      margin-top: 2rem;
    }

    .buttons button {
      padding: 0.75rem 1.5rem;
      border: none;
      border-radius: 8px;
      font-size: 1rem;
      cursor: pointer;
      transition: background 0.3s ease;
    }

    .buttons button.calculate {
      background: #4a90e2; /* Blue button */
      color: #fff;
    }

    .buttons button.reset {
      background: #ff6b6b; /* Red button */
      color: #fff;
    }

    .buttons button:hover {
      opacity: 0.9;
    }

    footer {
      background: #1f1f1f; /* Dark footer */
      color: #fff;
      width: 100%;
      padding: 1rem 0;
      text-align: center;
      margin-top: auto;
      box-shadow: 0 -4px 6px rgba(0, 0, 0, 0.3);
    }

    footer p {
      margin: 0;
      font-size: 0.9rem;
    }

    @media (max-width: 768px) {
      .charts {
        flex-direction: column;
      }

      .chart-container {
        width: 100%;
        margin-bottom: 1rem;
      }
    }
  </style>
</head>
<body>
  <header>
    <h1>EMI Calculator</h1>
  </header>

  <nav>
    <a href="https://muhammadsafiullahjav.github.io/finance-calculator/#calculators/home">Home</a>
    <a href="https://example.com/calculators">Calculators</a>
    <a href="https://example.com/about">About</a>
    <a href="https://example.com/contact">Contact</a>
</nav>

  <div class="container">
    <div class="intro">
      <p>
        The <strong>EMI Calculator</strong> helps you calculate your Equated Monthly Installment (EMI) for loans. 
        Simply enter the loan amount, interest rate, and loan tenure to get your monthly EMI, total interest payable, 
        and total payment. You can also view a breakdown of your loan repayment schedule and compare different currencies.
      </p>
    </div>

    <div class="input-group">
      <label for="currency">Currency</label>
      <select id="currency">
        <!-- Options will be populated dynamically -->
      </select>
    </div>
    <div class="input-group">
      <label for="loanAmount">Loan Amount</label>
      <input type="number" id="loanAmount" placeholder="Enter loan amount" min="0" value="10000">
    </div>
    <div class="input-group">
      <label for="interestRate">Interest Rate (%)</label>
      <input type="number" id="interestRate" placeholder="Enter interest rate" min="0" max="30" step="0.1" value="7.5">
    </div>
    <div class="input-group">
      <label for="loanTenure">Loan Tenure (Years)</label>
      <input type="number" id="loanTenure" placeholder="Enter loan tenure" min="1" max="30" value="5">
    </div>
    <div class="buttons">
      <button class="calculate" onclick="calculateEMI()">Calculate</button>
      <button class="reset" onclick="resetForm()">Reset</button>
    </div>
    <div class="results">
      <h2>Your EMI Details</h2>
      <p>Monthly EMI: <span id="emiValue">$0.00</span></p>
      <p>Total Interest Payable: <span id="totalInterest">$0.00</span></p>
      <p>Total Payment: <span id="totalPayment">$0.00</span></p>
    </div>
    <div class="charts">
      <div class="chart-container">
        <canvas id="pieChart" aria-label="Pie Chart showing Principal and Interest Breakdown"></canvas>
      </div>
      <div class="chart-container">
        <canvas id="lineChart" aria-label="Line Chart showing Loan Repayment Schedule"></canvas>
      </div>
    </div>
  </div>

  <footer>
    <p>&copy; 2023 EMI Calculator. All rights reserved.</p>
  </footer>

  <!-- The entire HTML and CSS remains the same until the script section -->
<script>
    const loanAmountInput = document.getElementById('loanAmount');
    const interestRateInput = document.getElementById('interestRate');
    const loanTenureInput = document.getElementById('loanTenure');
    const currencySelect = document.getElementById('currency');
    const emiValue = document.getElementById('emiValue');
    const totalInterest = document.getElementById('totalInterest');
    const totalPayment = document.getElementById('totalPayment');

    const pieChartCtx = document.getElementById('pieChart').getContext('2d');
    const lineChartCtx = document.getElementById('lineChart').getContext('2d');

    let pieChart, lineChart;
    let exchangeRates = {};
    const baseCurrency = 'USD';

    // Currency data array remains the same...

    // Fetch exchange rates function remains the same...

    // Populate currency dropdown function remains the same...

    // Convert currency function remains the same...

    // Format currency function remains the same...

    function calculateEMI() {
        // Calculation logic remains the same...
    }

    function updateCharts(principal, interest, tenureMonths) {
        if (pieChart) pieChart.destroy();
        if (lineChart) lineChart.destroy();

        // Pie Chart remains the same...
        pieChart = new Chart(pieChartCtx, {
            type: 'pie',
            data: {
                labels: ['Principal', 'Interest'],
                datasets: [{
                    data: [principal, interest],
                    backgroundColor: ['#4a90e2', '#ff6b6b'],
                }],
            },
        });

        // Enhanced Line Chart
        const labels = Array.from({ length: tenureMonths }, (_, i) => `Month ${i + 1}`);
        const data = [];
        let remainingPrincipal = principal;
        const monthlyInterestRate = parseFloat(interestRateInput.value) / 1200;
        const monthlyPayment = (principal * monthlyInterestRate * Math.pow(1 + monthlyInterestRate, tenureMonths)) / 
                             (Math.pow(1 + monthlyInterestRate, tenureMonths) - 1);

        for (let i = 0; i < tenureMonths; i++) {
            const interestPaid = remainingPrincipal * monthlyInterestRate;
            const principalPaid = monthlyPayment - interestPaid;
            remainingPrincipal -= principalPaid;
            data.push(remainingPrincipal);
        }

        // Create gradient fill
        const gradient = lineChartCtx.createLinearGradient(0, 0, 0, 400);
        gradient.addColorStop(0, 'rgba(74, 144, 226, 0.6)');
        gradient.addColorStop(1, 'rgba(74, 144, 226, 0)');

        lineChart = new Chart(lineChartCtx, {
            type: 'line',
            data: {
                labels: labels,
                datasets: [{
                    label: 'Remaining Loan Balance',
                    data: data,
                    borderColor: '#4a90e2',
                    borderWidth: 3,
                    borderDash: [5, 5],
                    tension: 0.4,
                    pointRadius: 0,
                    pointHoverRadius: 5,
                    pointBackgroundColor: '#fff',
                    fill: true,
                    backgroundColor: gradient,
                }],
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        labels: {
                            color: '#e0e0e0',
                            font: { size: 14 }
                        }
                    },
                    tooltip: {
                        backgroundColor: '#1f1f1f',
                        titleColor: '#4a90e2',
                        bodyColor: '#e0e0e0',
                        borderColor: '#333',
                        borderWidth: 1,
                        displayColors: false,
                        callbacks: {
                            title: (context) => `Month ${context[0].dataIndex + 1}`,
                            label: (context) => {
                                const value = new Intl.NumberFormat('en-US', {
                                    style: 'currency',
                                    currency: currencySelect.value
                                }).format(context.parsed.y);
                                return `Balance: ${value}`;
                            }
                        }
                    }
                },
                scales: {
                    x: {
                        grid: { color: '#333', borderColor: '#333' },
                        ticks: {
                            color: '#b0b0b0',
                            maxTicksLimit: 12,
                            callback: function(value, index) {
                                return (index + 1) % 12 === 0 ? `Year ${(index + 1)/12}` : '';
                            }
                        }
                    },
                    y: {
                        grid: { color: '#333', borderColor: '#333' },
                        ticks: {
                            color: '#b0b0b0',
                            callback: function(value) {
                                return new Intl.NumberFormat('en-US', {
                                    style: 'currency',
                                    currency: currencySelect.value,
                                    maximumFractionDigits: 0
                                }).format(value);
                            }
                        },
                        beginAtZero: true
                    }
                },
                animation: {
                    duration: 2000,
                    easing: 'easeOutQuart'
                }
            }
        });
    }

    // Reset form function remains the same...

    // Initialize app function remains the same...

    // Event listener for currency change remains the same...
</script>
</body>
</html>
